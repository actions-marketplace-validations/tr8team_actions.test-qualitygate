class App {
    #input;
    #service;
    #io;
    run() {
        return this.#input
            .retrieve()
            .map((input) => this.#service.audit(input))
            .run((output) => {
            this.#io.setObject("current", output.current);
            this.#io.setObject("history", output.history);
        })
            .err();
    }
    constructor(input, service, io) {
        this.#input = input;
        this.#service = service;
        this.#io = io;
    }
}
export { App };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLEdBQUc7SUFDRSxNQUFNLENBQWlCO0lBQ3ZCLFFBQVEsQ0FBcUI7SUFFN0IsR0FBRyxDQUFXO0lBRXZCLEdBQUc7UUFDRCxPQUFPLElBQUksQ0FBQyxNQUFNO2FBQ2YsUUFBUSxFQUFFO2FBQ1YsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMxQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUNkLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUM7YUFDRCxHQUFHLEVBQUUsQ0FBQztJQUNYLENBQUM7SUFFRCxZQUNFLEtBQXFCLEVBQ3JCLE9BQTJCLEVBQzNCLEVBQVk7UUFFWixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcHRpb24gfSBmcm9tIFwiLi9jb3JlL29wdGlvblwiO1xuaW1wb3J0IHsgSW5wdXRSZXRyaWV2ZXIgfSBmcm9tIFwiLi9pbnRlcmZhY2UvaW5wdXQtcmV0cmlldmVyXCI7XG5pbXBvcnQgeyBRdWFsaXR5R2F0ZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQgeyBBY3Rpb25JTyB9IGZyb20gXCIuL2ludGVyZmFjZS9pb1wiO1xuXG5jbGFzcyBBcHAge1xuICByZWFkb25seSAjaW5wdXQ6IElucHV0UmV0cmlldmVyO1xuICByZWFkb25seSAjc2VydmljZTogUXVhbGl0eUdhdGVTZXJ2aWNlO1xuXG4gIHJlYWRvbmx5ICNpbzogQWN0aW9uSU87XG5cbiAgcnVuKCk6IE9wdGlvbjxFcnJvcj4ge1xuICAgIHJldHVybiB0aGlzLiNpbnB1dFxuICAgICAgLnJldHJpZXZlKClcbiAgICAgIC5tYXAoKGlucHV0KSA9PiB0aGlzLiNzZXJ2aWNlLmF1ZGl0KGlucHV0KSlcbiAgICAgIC5ydW4oKG91dHB1dCkgPT4ge1xuICAgICAgICB0aGlzLiNpby5zZXRPYmplY3QoXCJjdXJyZW50XCIsIG91dHB1dC5jdXJyZW50KTtcbiAgICAgICAgdGhpcy4jaW8uc2V0T2JqZWN0KFwiaGlzdG9yeVwiLCBvdXRwdXQuaGlzdG9yeSk7XG4gICAgICB9KVxuICAgICAgLmVycigpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW5wdXQ6IElucHV0UmV0cmlldmVyLFxuICAgIHNlcnZpY2U6IFF1YWxpdHlHYXRlU2VydmljZSxcbiAgICBpbzogQWN0aW9uSU9cbiAgKSB7XG4gICAgdGhpcy4jaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLiNzZXJ2aWNlID0gc2VydmljZTtcbiAgICB0aGlzLiNpbyA9IGlvO1xuICB9XG59XG5cbmV4cG9ydCB7IEFwcCB9O1xuIl19